"use strict";var express=require("express"),mysql=require("mysql"),_require=require("./reg"),route=_require.route,connection=mysql.createConnection({host:"localhost",user:"root",password:"863987995",database:"h52108"}),pool=mysql.createPool({host:"localhost",user:"root",password:"863987995",database:"h52108"}),router=express.Router();function asyncGeneratorStep(e,r,n,t,o,s,a){try{var u=e[s](a),c=u.value}catch(e){return void n(e)}u.done?r(c):Promise.resolve(c).then(t,o)}function _asyncToGenerator(u){return function(){var e=this,a=arguments;return new Promise(function(r,n){var t=u.apply(e,a);function o(e){asyncGeneratorStep(t,r,n,o,s,"next",e)}function s(e){asyncGeneratorStep(t,r,n,o,s,"throw",e)}o(void 0)})}}(module.exports=router).get("/list",function(e,n){pool.query("select * from goods",function(e,r){n.send(r)})}),router.get("/:id",function(e,n){e=e.params.id,e="select * from goods where id=".concat(e);pool.query(e,function(e,r){n.send(r[0])})});var express=require("express"),db=require("../db"),router=express.Router();function asyncGeneratorStep(e,r,n,t,o,s,a){try{var u=e[s](a),c=u.value}catch(e){return void n(e)}u.done?r(c):Promise.resolve(c).then(t,o)}function _asyncToGenerator(u){return function(){var e=this,a=arguments;return new Promise(function(r,n){var t=u.apply(e,a);function o(e){asyncGeneratorStep(t,r,n,o,s,"next",e)}function s(e){asyncGeneratorStep(t,r,n,o,s,"throw",e)}o(void 0)})}}(module.exports=router).get("/",function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(r,n){var t,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.query,t=s.username,o=s.password,s.mdl,s="select id,username,regtime from user where username='".concat(t,"' and password='").concat(o,"'"),e.next=4,db(s);case 4:s=e.sent,console.log(s),console.log(t),console.log(o),0<s.length?n.send({code:200,data:s[0],message:"success"}):n.send({code:400,data:[],message:"fail"});case 9:case"end":return e.stop()}},e)}));return function(e,r){return n.apply(this,arguments)}}());express=require("express"),db=require("../db"),router=express.Router();(module.exports=router).get("/check",function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(r,n){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.query.username,t="select username from user where username='".concat(t,"'"),e.next=4,db(t);case 4:t=e.sent,console.log("data",t),0<t.length?n.send({code:400}):n.send({code:200});case 7:case"end":return e.stop()}},e)}));return function(e,r){return n.apply(this,arguments)}}()),router.post("/",function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(r,n){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),o=r.body,t=o.username,o=o.password,console.log("req.body",r.body),o="insert into user(username,password) value('".concat(t,"','").concat(o,"')"),e.next=6,db(o);case 6:e.sent.insertId?n.send({code:200,data:[],msg:"success"}):n.send({code:400,data:[],msg:"fail"});case 8:case"end":return e.stop()}},e)}));return function(e,r){return n.apply(this,arguments)}}());